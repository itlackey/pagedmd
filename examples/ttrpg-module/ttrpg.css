/* TTRPG Module Styling */

:root {
  --color-statblock: #f0e5d8;
  --color-statblock-border: #8b4513;
  --color-ability: #e8f4f8;
  --color-ability-border: #4a90a4;
}

/* Stat blocks */
.statblock {
  background-color: var(--color-statblock);
  border: 2px solid var(--color-statblock-border);
  padding: 1em;
  margin: 1.5em 0;
  break-inside: avoid;
  font-size: 10pt;
}

.statblock h3 {
  margin: 0 0 0.5em 0;
  font-size: 14pt;
  color: var(--color-statblock-border);
  border-bottom: 2px solid var(--color-statblock-border);
  padding-bottom: 0.25em;
}

.statblock p {
  margin: 0.25em 0;
  text-indent: 0;
}

.statblock strong {
  font-weight: 700;
  color: var(--color-statblock-border);
}

/* Stat block tables */
.statblock table {
  width: 100%;
  margin: 0.5em 0;
  font-size: 9pt;
  background: transparent;
}

.statblock table th,
.statblock table td {
  text-align: center;
  padding: 0.25em;
  border: 1px solid var(--color-statblock-border);
  background: rgba(255, 255, 255, 0.3);
}

.statblock table th {
  font-weight: bold;
  background: rgba(139, 69, 19, 0.2);
}

/* Ability blocks */
.ability {
  background-color: var(--color-ability);
  border-left: 4px solid var(--color-ability-border);
  padding: 1em;
  margin: 1em 0;
  break-inside: avoid;
}

.ability h3 {
  margin: 0 0 0.5em 0;
  font-size: 12pt;
  color: var(--color-ability-border);
}

/* Dice roll formatting */
code[class*="dice"],
code:has-text("d4"),
code:has-text("d6"),
code:has-text("d8"),
code:has-text("d10"),
code:has-text("d12"),
code:has-text("d20") {
  background-color: #f0e5d8;
  color: #8b4513;
  font-weight: bold;
  padding: 0.1em 0.3em;
  border-radius: 2px;
}

/* DC challenges */
code:has-text("DC") {
  background-color: #ffe4e1;
  color: #dc143c;
  font-weight: bold;
}

/* Chapter headers for adventure parts */
h1 {
  string-set: adventure-part content();
  border-bottom: 3px solid #8b4513;
  padding-bottom: 0.5em;
  color: #8b4513;
}

/* Running headers */
@page {
  @top-center {
    content: string(adventure-part);
    font-size: 9pt;
    font-style: italic;
    color: #8b4513;
  }

  @bottom-center {
    content: "The Cursed Catacombs - Page " counter(page);
    font-size: 9pt;
    color: #666;
  }
}

/* Area headers */
h2 {
  color: #4a90a4;
  border-bottom: 2px solid #4a90a4;
  padding-bottom: 0.25em;
  margin-top: 1.5em;
  break-after: avoid;
}

/* Read-aloud text (blockquotes) */
blockquote {
  background-color: #f8f8f0;
  border-left: 5px solid #8b4513;
  padding: 1em;
  margin: 1em 0;
  font-style: italic;
  font-family: Georgia, serif;
  break-inside: avoid;
}

/* Tables */
table {
  width: 100%;
  border-collapse: collapse;
  margin: 1em 0;
  font-size: 10pt;
  break-inside: avoid;
}

th {
  background-color: #8b4513;
  color: white;
  padding: 0.5em;
  text-align: left;
  font-weight: bold;
}

td {
  padding: 0.5em;
  border-bottom: 1px solid #ddd;
}

tr:nth-child(even) {
  background-color: #f8f8f0;
}

/* Combat stat formatting */
em {
  color: #666;
  font-style: italic;
}

/* Lists */
ul, ol {
  margin: 0.5em 0 0.5em 1.5em;
}

li {
  margin: 0.25em 0;
}

/* Sidebar boxes */
.sidebar {
  background-color: #fff8dc;
  border: 2px dashed #8b4513;
  padding: 1em;
  margin: 1em 0;
  break-inside: avoid;
}

.sidebar h3,
.sidebar h4 {
  margin-top: 0;
  color: #8b4513;
}

/* Maps (code blocks with map ASCII art) */
pre:has-text("[") {
  background-color: #f8f8f0;
  border: 2px solid #8b4513;
  padding: 1em;
  font-family: "Courier New", monospace;
  font-size: 9pt;
  line-height: 1.2;
}

/* Treasure formatting */
code:has-text("gp"),
code:has-text("sp"),
code:has-text("cp") {
  background-color: #ffd700;
  color: #8b4513;
  font-weight: bold;
}

/* Magic items */
em:has-text("+1"),
em:has-text("+2"),
em:has-text("+3") {
  color: #9370db;
  font-weight: bold;
  font-style: normal;
}

/* Handouts */
.handout {
  background-color: #faf8f3;
  border: 3px double #8b4513;
  padding: 1.5em;
  margin: 2em 0;
  font-family: "Courier New", monospace;
  font-size: 10pt;
  break-inside: avoid;
}

.handout p {
  margin: 0.5em 0;
  text-indent: 0;
}

/* Section breaks */
hr {
  border: none;
  border-top: 2px solid #8b4513;
  margin: 2em 0;
}

/* Keep encounter blocks together */
h3 + .statblock,
h3 + p + .statblock {
  break-before: avoid;
}

/* DM notes */
.dm-note {
  background-color: #e6f3ff;
  border-left: 4px solid #4a90a4;
  padding: 0.75em;
  margin: 1em 0;
  font-size: 9pt;
  break-inside: avoid;
}

.dm-note::before {
  content: "DM Note: ";
  font-weight: bold;
  color: #4a90a4;
}
