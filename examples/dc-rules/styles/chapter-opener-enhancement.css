/* ========================================
   CHAPTER OPENER ENHANCEMENT SYSTEM
   ======================================== */

/**
 * Production-ready CSS for enhanced chapter opener pages
 * Addresses design review recommendations for visual hierarchy,
 * white space utilization, and professional chapter introductions.
 *
 * This system provides:
 * - Dedicated @page styling for chapter openers
 * - Structured content areas (header, intro, overview)
 * - Quote/attribution styling
 * - Two-column overview lists
 * - Icon/badge placement areas
 * - Print-optimized spacing and break controls
 */

/* ========================================
   CHAPTER OPENER PAGE SETUP
   ======================================== */

/**
 * Chapter opener pages use increased top margin for visual hierarchy
 * and suppress running headers for clean presentation.
 */
@page chapter-opener {
    size: 8.5in 11in;
    margin-top: 1.75in;
    margin-bottom: 0.7in;
    margin-left: 0.7in;
    margin-right: 0.7in;
    bleed: 0.125in;
    orphans: 4;
    widows: 4;

    /* Suppress running headers on chapter openers */
    @top-left {
        content: none;
    }
    @top-right {
        content: none;
    }

    /* Keep page numbers */
    @bottom-left {
        content: counter(page);
        font-family: var(--ui-font);
        font-size: 9.5pt;
        font-weight: 600;
    }
    @bottom-right {
        content: counter(page);
        font-family: var(--ui-font);
        font-size: 9.5pt;
        font-weight: 600;
    }
}

/* ========================================
   CHAPTER OPENER CONTAINER
   ======================================== */

/**
 * Main container for chapter opener content
 * Provides structure and consistent spacing for opener elements
 */
.chapter-opener {
    page: chapter-opener;
    break-before: right;
    break-after: page;
    break-inside: avoid;
    display: block;
    width: 100%;
    max-width: 100%;
    margin: 0;
    padding: 0;
}

/* ========================================
   CHAPTER HEADER COMPONENTS
   ======================================== */

/**
 * Chapter number - optional decorative element
 * Provides visual anchor and hierarchy cue
 */
.chapter-opener__number {
    font-family: var(--heading-font);
    font-size: 14pt;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--gray-50);
    margin: 0 0 0.12in 0;
    display: block;
}

/**
 * Chapter title - primary heading
 * Large, bold treatment with underline for emphasis
 */
.chapter-opener__title {
    font-family: var(--heading-font);
    font-size: 28pt;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--black);
    border-bottom: 2.5pt solid var(--black);
    padding-bottom: 0.15in;
    margin: 0 0 0.24in 0;
    break-after: avoid;
    line-height: 1.1;
}

/**
 * Chapter subtitle - optional secondary heading
 * Provides context or thematic description
 */
.chapter-opener__subtitle {
    font-family: var(--body-font);
    font-size: 12pt;
    font-weight: 400;
    font-style: italic;
    color: var(--gray-90);
    margin: -0.18in 0 0.24in 0;
    display: block;
    break-after: avoid;
}

/* ========================================
   ICON/BADGE PLACEMENT AREA
   ======================================== */

/**
 * Container for decorative icons, district badges, or visual elements
 * Positioned to create visual interest without overwhelming content
 */
.chapter-opener__badge {
    display: inline-block;
    margin: 0 0 0.18in 0;
    padding: 0.08in 0.15in;
    border: 1.5pt solid var(--black);
    font-family: var(--ui-font);
    font-size: 10pt;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    break-after: avoid;
}

/**
 * Multiple badges in a row
 */
.chapter-opener__badges {
    display: flex;
    flex-wrap: wrap;
    gap: 0.12in;
    margin: 0 0 0.24in 0;
    break-after: avoid;
}

/* ========================================
   INTRODUCTION TEXT
   ======================================== */

/**
 * Chapter introduction paragraph(s)
 * Provides overview and sets context for the chapter content
 */
.chapter-opener__intro {
    font-family: var(--body-font);
    font-size: 11pt;
    line-height: 1.6;
    color: var(--black);
    margin: 0 0 0.24in 0;
    text-indent: 0;
    hyphens: auto;
    orphans: 4;
    widows: 4;
}

/**
 * First paragraph gets special treatment - no indent, slightly larger
 */
.chapter-opener__intro:first-of-type {
    font-size: 11.5pt;
    line-height: 1.65;
}

/**
 * Emphasis within intro text
 */
.chapter-opener__intro strong {
    font-weight: 700;
    color: var(--black);
}

.chapter-opener__intro em {
    font-style: italic;
}

/* ========================================
   QUOTE & ATTRIBUTION
   ======================================== */

/**
 * Featured quote or flavor text
 * Provides atmosphere and thematic grounding
 */
.chapter-opener__quote {
    font-family: var(--body-font);
    font-size: 12pt;
    font-style: italic;
    line-height: 1.5;
    color: var(--gray-90);
    border-left: 2pt solid var(--black);
    padding: 0.15in 0 0.15in 0.25in;
    margin: 0.24in 0;
    background-color: transparent;
    break-inside: avoid;
}

/**
 * Quote attribution - author, character, or source
 */
.chapter-opener__attribution {
    font-family: var(--ui-font);
    font-size: 9.5pt;
    font-style: normal;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--gray-50);
    margin-top: 0.08in;
    display: block;
    text-align: right;
}

.chapter-opener__attribution::before {
    content: "— ";
}

/* ========================================
   OVERVIEW SECTION
   ======================================== */

/**
 * Chapter overview container with optional heading
 * Provides structured summary of chapter contents
 */
.chapter-opener__overview {
    margin: 0.3in 0 0 0;
    padding: 0;
    break-inside: avoid;
}

/**
 * Overview section heading
 */
.chapter-opener__overview-title {
    font-family: var(--heading-font);
    font-size: 13pt;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--black);
    border-bottom: 1pt solid var(--black);
    padding-bottom: 0.06in;
    margin: 0 0 0.15in 0;
    break-after: avoid;
}

/**
 * Overview introduction paragraph
 */
.chapter-opener__overview-intro {
    font-family: var(--body-font);
    font-size: 10.5pt;
    line-height: 1.5;
    color: var(--black);
    margin: 0 0 0.15in 0;
    text-indent: 0;
}

/* ========================================
   TWO-COLUMN OVERVIEW LIST
   ======================================== */

/**
 * Two-column list for chapter sections/topics
 * Optimizes space usage while maintaining readability
 */
.chapter-opener__list {
    column-count: 2;
    column-gap: 0.3in;
    column-fill: balance;
    list-style: none;
    margin: 0;
    padding: 0;
    break-inside: avoid;
}

/**
 * Individual list items with custom bullet
 */
.chapter-opener__list li {
    position: relative;
    padding-left: 0.25in;
    margin-bottom: 0.09in;
    font-family: var(--body-font);
    font-size: 10.5pt;
    line-height: 1.4;
    color: var(--black);
    break-inside: avoid;
    orphans: 2;
    widows: 2;
}

/**
 * Custom bullet styling
 */
.chapter-opener__list li::before {
    content: "›";
    position: absolute;
    left: 0;
    font-family: var(--ui-font);
    font-size: 14pt;
    font-weight: 700;
    color: var(--black);
}

/**
 * Emphasized list items (e.g., new content, important sections)
 */
.chapter-opener__list li strong {
    font-weight: 700;
    color: var(--black);
}

/* ========================================
   SINGLE-COLUMN VARIANT
   ======================================== */

/**
 * For shorter lists or when two columns would be awkward
 * Use class: chapter-opener__list--single-column
 */
.chapter-opener__list--single-column {
    column-count: 1;
}

/* ========================================
   CALLOUT BOX VARIANT
   ======================================== */

/**
 * Boxed callout within chapter opener
 * For highlighting key concepts, warnings, or special notes
 */
.chapter-opener__callout {
    border: 1.5pt solid var(--black);
    padding: 0.12in 0.15in;
    margin: 0.24in 0;
    background-color: var(--white);
    break-inside: avoid;
}

.chapter-opener__callout-title {
    font-family: var(--ui-font);
    font-size: 11pt;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--black);
    margin: 0 0 0.09in 0;
}

.chapter-opener__callout p {
    font-size: 10.5pt;
    line-height: 1.5;
    margin: 0 0 0.06in 0;
    text-indent: 0;
}

.chapter-opener__callout p:last-child {
    margin-bottom: 0;
}

/* ========================================
   VISUAL DIVIDERS
   ======================================== */

/**
 * Decorative horizontal rule for section breaks within opener
 */
.chapter-opener__divider {
    border: none;
    border-top: 0.75pt solid var(--gray-30);
    margin: 0.24in 0;
    width: 2in;
    margin-left: auto;
    margin-right: auto;
}

/* ========================================
   PRINT OPTIMIZATION
   ======================================== */

/**
 * Ensure chapter openers render correctly in print
 */
@media print {
    .chapter-opener,
    .chapter-opener__quote,
    .chapter-opener__overview,
    .chapter-opener__callout {
        color-adjust: exact;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    /* Prevent list column breaks mid-item */
    .chapter-opener__list li {
        break-inside: avoid;
        page-break-inside: avoid;
    }

    /* Ensure proper black rendering */
    .chapter-opener__title,
    .chapter-opener__overview-title {
        color: #000000 !important;
        border-color: #000000 !important;
    }
}

/* ========================================
   USAGE NOTES
   ======================================== */

/**
 * MARKDOWN STRUCTURE EXAMPLE:
 *
 * <div class="chapter-opener">
 *
 * <div class="chapter-opener__number">Chapter One</div>
 *
 * <h1 class="chapter-opener__title">Crew & Gear</h1>
 *
 * <div class="chapter-opener__subtitle">Essential Tools for Dreaming</div>
 *
 * <div class="chapter-opener__intro">
 * Welcome to the streets of Dimm City, where every dreamer needs the right
 * crew and gear to survive. This chapter covers everything you need to start
 * your journey through the neon-soaked districts and shadow-filled alleys.
 * </div>
 *
 * <div class="chapter-opener__quote">
 * "In Dimm City, your gear is your lifeline, but your crew is your salvation."
 * <span class="chapter-opener__attribution">Daemon's Field Manual</span>
 * </div>
 *
 * <div class="chapter-opener__overview">
 * <h3 class="chapter-opener__overview-title">In This Chapter</h3>
 * <p class="chapter-opener__overview-intro">
 * You'll discover the essential components of gameplay:
 * </p>
 * <ul class="chapter-opener__list">
 *   <li>Required dice and materials</li>
 *   <li>Building your crew (4-6 players)</li>
 *   <li>Dream Master responsibilities</li>
 *   <li>Player character creation</li>
 *   <li>Species selection</li>
 *   <li>Specialty classes</li>
 *   <li>Equipment and augmentations</li>
 *   <li>Carrying capacity rules</li>
 * </ul>
 * </div>
 *
 * </div>
 *
 * <!-- Regular chapter content continues here -->
 *
 */
