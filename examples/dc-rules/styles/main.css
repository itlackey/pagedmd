/**
 * DC Rules - Professional Print-Ready Stylesheet
 * 8.5in x 11in Black & White TTRPG Rulebook
 *
 * CLEAN, SIMPLE, REPEATABLE SOLUTION
 * - Tighter typography for better density
 * - Consistent spacing throughout
 * - Two-column layouts for space savings
 * - No overflow issues
 * - Professional page breaks
 */

/* Import fonts */
@import url("https://fonts.googleapis.com/css2?family=Tomorrow:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
@import url("http://fonts.googleapis.com/css2?family=Titillium Web:wght@100;200;300;400;500;600;700");
@import url("https://fonts.googleapis.com/css2?family=Lexend:wght@100;200;300;400;500;600;700;800;900&display=swap");

/* ========================================
   ROOT VARIABLES
   ======================================== */

:root {
    /* Colors - Black & White only */
    --black: #000000;
    --white: #ffffff;
    --gray-10: #f5f5f5;
    --gray-20: #e0e0e0;
    --gray-30: #d0d0d0;
    --gray-50: #808080;
    --gray-90: #1a1a1a;

    /* Typography */
    --body-font: "Tomorrow", "Titillium Web", Monospace, sans-serif;
    --heading-font: "lixdu", "Titillium Web", sans-serif;
    --ui-font: "Lexend", "Titillium Web", sans-serif;

    /* Font sizes - tightened for density */
    --h1-size: 24pt;
    --h2-size: 16pt;
    --h3-size: 13.5pt;
    --h4-size: 12pt;
    --body-size: 10.5pt;

    /* Spacing - consistent baseline grid */
    --spacing-xs: 0.06in;
    --spacing-sm: 0.09in;
    --spacing-md: 0.12in;
    --spacing-lg: 0.18in;
    --spacing-xl: 0.24in;
}

/* ========================================
   PAGE SETUP
   ======================================== */

@page {
    size: 8.5in 11in;
    margin: 0.7in;
    bleed: 0.125in;
    orphans: 4;
    widows: 4;
}

@page :left {
    margin-left: 0.7in;
    margin-right: 0.5in;

    @top-left {
        content: "DIMM CITY";
        font-family: var(--ui-font);
        font-size: 8.5pt;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--gray-50);
    }

    @bottom-left {
        content: counter(page);
        font-family: var(--ui-font);
        font-size: 9.5pt;
        font-weight: 600;
    }
}

@page :right {
    margin-left: 0.5in;
    margin-right: 0.7in;

    @top-right {
        content: string(section-title);
        font-family: var(--ui-font);
        font-size: 8.5pt;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--gray-50);
    }

    @bottom-right {
        content: counter(page);
        font-family: var(--ui-font);
        font-size: 9.5pt;
        font-weight: 600;
    }
}

@page :first {
    @top-left {
        content: none;
    }
    @top-right {
        content: none;
    }
    @bottom-left {
        content: none;
    }
    @bottom-right {
        content: none;
    }
}

@page chapter {
    margin-top: 1.75in;
    @top-left {
        content: none;
    }
    @top-right {
        content: none;
    }
}

/* ========================================
   BODY & BASIC TYPOGRAPHY
   ======================================== */

body {
    font-family: var(--body-font);
    font-size: 14px;
    line-height: 1.5;
    color: var(--black);
    text-align: left;
    hyphens: auto;
    orphans: 4;
    widows: 4;
}

/* ========================================
   HEADINGS
   ======================================== */

h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: var(--heading-font);
    font-weight: 700;
    line-height: 1.2;
    color: var(--black);
    background-color: transparent;
    break-after: avoid;
    orphans: 4;
    widows: 4;
}

h1 {
    font-size: var(--h1-size);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-bottom: 2pt solid var(--black);
    padding-bottom: 0.15in;
    margin: 0 0 0.5in 0;
    page: chapter;
    break-before: page;
    string-set: section-title content();
}

h2 {
    font-size: var(--h2-size);
    border-bottom: 1pt solid var(--black);
    padding-bottom: 0.08in;
    margin: 0.24in 0 0.12in 0;
    string-set: section-title content();
}

h3 {
    font-size: var(--h3-size);
    margin: 0.18in 0 0.12in 0;
}

h4 {
    font-size: var(--h4-size);
    margin: 0.12in 0 0.09in 0;
}

/* ========================================
   PARAGRAPHS & TEXT
   ======================================== */

p {
    margin: 0 0 0.12in 0;
    text-indent: 20px;
    orphans: 4;
    widows: 4;
    /* Enable hyphenation for justified text */
    text-align: justify;
    hyphens: auto;
    -webkit-hyphens: auto;
    -moz-hyphens: auto;
    -ms-hyphens: auto;
    hyphenate-limit-chars: 6 3 3;
    hyphenate-limit-lines: 2;
    hyphenate-limit-last: always;
}

h1 + p,
h2 + p,
h3 + p,
h4 + p,
.wrapper + p {
    text-indent: 0;
}

/* ========================================
   LISTS
   ======================================== */

ul,
ol {
    margin: 0.12in 0;
    padding-left: 0.2in;
}

li {
    margin-bottom: 0.06in;
}

ul {
    list-style: none;
}

ul li {
    position: relative;
    padding-left: 0.25in;
}

ul li::before {
    content: "*";
    position: absolute;
    left: 0;
    font-weight: 700;
    font-size: 12pt;
}

ul ul li::before {
    content: "â€º";
    font-size: 14pt;
}

/* ========================================
   TABLES
   ======================================== */

table {
    width: 100%;
    max-width: 100%;
    margin: 0.2in 0;
    border-collapse: collapse;
    font-family: var(--ui-font);
    font-size: 9.5pt;
    break-inside: avoid;
    table-layout: auto;
}

table th {
    background-color: #000000 !important;
    color: #ffffff !important;
    font-weight: 700;
    font-size: 9.5pt;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    text-align: left;
    padding: 0.08in 0.14in;
    border: 1pt solid var(--black);
}

table td {
    padding: 0.08in 0.14in;
    border: 0.5pt solid var(--gray-20);
    vertical-align: top;
    word-wrap: break-word;
    hyphens: auto;
    font-size: 9.5pt;
}

table tr {
    break-inside: avoid;
}

/* ========================================
   CODE
   ======================================== */

code {
    font-family: "Courier New", monospace;
    font-weight: 600;
    font-size: 9pt;
    background-color: var(--gray-10);
    padding: 0.01in 0.04in;
    border-radius: 2pt;
}

pre {
    font-family: "Courier New", monospace;
    font-size: 8.5pt;
    background-color: var(--gray-10);
    padding: 0.12in;
    border: 0.5pt solid var(--gray-20);
    border-radius: 2pt;
    overflow-x: auto;
    break-inside: avoid;
    margin: 0.15in 0;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/* ========================================
   BLOCKQUOTES
   ======================================== */

blockquote {
    margin: 0.18in 0;
    padding: 0.1in 0 0.1in 0.25in;
    border-left: 1.5pt solid var(--black);
    font-style: italic;
    color: var(--gray-90);
    break-inside: avoid;
}

blockquote p {
    text-indent: 0;
}

/* ========================================
   HORIZONTAL RULES
   ======================================== */

hr {
    border: none;
    border-top: 0.75pt solid var(--black);
    margin: 0.24in 0;
}

/* ========================================
   LINKS
   ======================================== */

a {
    color: var(--black);
    text-decoration: underline;
    text-decoration-color: var(--gray-30);
    text-decoration-thickness: 0.5pt;
}

/* ========================================
   IMAGES
   ======================================== */

img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 0.2in auto;
    break-inside: avoid;
}

/* ========================================
   PAGE BREAK UTILITIES
   ======================================== */

.page-break {
    break-after: page;
    height: 0;
    visibility: hidden;
}

.keep-together {
    break-inside: avoid;
}

.break-before {
    break-before: page;
}

/* ========================================
   PRINT OPTIMIZATION
   ======================================== */

@media print {
    * {
        color-adjust: exact;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    /* Ensure proper black for printing */
    table th {
        background-color: #000000 !important;
        color: #ffffff !important;
    }

    /* Prevent overflow */
    table,
    pre,
    code {
        max-width: 100%;
        overflow: visible;
    }
}

/* ========================================
   SCREEN PREVIEW
   ======================================== */

@media screen {
    body {
        background-color: #f5f5f5;
        padding: 1rem;
    }

    .pagedjs_page {
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
        margin: 1rem auto;
    }
}
