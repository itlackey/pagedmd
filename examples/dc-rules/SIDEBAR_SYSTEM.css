/**
 * DC Rules - Professional Sidebar System
 * 8.5in x 11in Black & White TTRPG Rulebook
 *
 * COMPREHENSIVE SIDEBAR SOLUTION FOR SPACE OPTIMIZATION
 * - Page-level two-column grid layouts
 * - Sidebar box components with variants
 * - Pull quote system with floating options
 * - Callout boxes for rules and warnings
 * - Print-safe spacing and page breaks
 *
 * USAGE:
 * Append this CSS to your existing styles.css file
 * All CSS custom properties use existing design tokens
 */

/* ========================================
   PAGE GRID LAYOUTS - MAIN + SIDEBAR
   ======================================== */

/**
 * Two-Column Page Layout
 * Main content (70%) + Sidebar (30%) with proper gaps
 * Use: class='page-with-sidebar' on section or article containers
 */
.page-with-sidebar {
	display: grid;
	grid-template-columns: 2.2in 0.8in;
	gap: 0.2in;
	margin: 0;
	padding: 0;

	/* Print optimization */
	break-inside: avoid;
	page-break-inside: avoid;
	orphans: 4;
	widows: 4;
}

.page-with-sidebar > * {
	margin: 0;
	padding: 0;
}

/**
 * Main content column - spans most of the page width
 * Flows text normally without column breaks
 */
.main-content {
	display: block;
	width: 100%;
	min-width: 0;

	/* Ensure proper text flow */
	overflow-wrap: break-word;
	word-break: break-word;
	hyphens: auto;
}

/**
 * Sidebar column - narrow right column for sidebar boxes
 * Keeps sidebars together without overflow
 */
.sidebar-column {
	display: flex;
	flex-direction: column;
	gap: 0.12in;
	width: 100%;
	min-width: 0;

	/* Keep sidebar items compact */
	break-inside: avoid;
	page-break-inside: avoid;
}

/**
 * Alternative: Three-Column Layout
 * Main (60%) + Left Sidebar (20%) + Right Sidebar (20%)
 * Use: class='page-three-column' on container
 */
.page-three-column {
	display: grid;
	grid-template-columns: 0.7in 2.1in 0.7in;
	gap: 0.15in;
	margin: 0;
	padding: 0;

	break-inside: avoid;
	page-break-inside: avoid;
	orphans: 4;
	widows: 4;
}

.page-three-column > * {
	margin: 0;
	padding: 0;
	min-width: 0;
	overflow-wrap: break-word;
	word-break: break-word;
}

/* ========================================
   SIDEBAR BOX COMPONENTS - Base Styles
   ======================================== */

/**
 * Base Sidebar Box
 * All sidebar variants inherit from this class
 *
 * Usage:
 * <div class='sidebar-box'>
 *   <div class='sidebar-title'>Title</div>
 *   <div class='sidebar-content'>Content</div>
 * </div>
 */
.sidebar-box {
	background: var(--white);
	border: 1pt solid var(--gray-20);
	padding: 0.1in;
	margin: 0;

	/* Print optimization */
	break-inside: avoid;
	page-break-inside: avoid;
	orphans: 3;
	widows: 3;
	max-width: 100%;
	overflow-wrap: break-word;
	word-break: break-word;
	hyphens: auto;
}

/**
 * Sidebar Title/Header
 * Bold, uppercase, small font for density
 */
.sidebar-title {
	font-family: var(--ui-font);
	font-size: 8pt;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	color: var(--black);
	background-color: var(--gray-10);
	padding: 0.08in 0.1in;
	margin: -0.1in -0.1in 0.08in -0.1in;
	border-bottom: 0.5pt solid var(--gray-20);

	/* Keep title with content */
	break-after: avoid;
	page-break-after: avoid;
}

/**
 * Sidebar Content
 * Tight spacing for density, small font
 */
.sidebar-content {
	font-family: var(--body-font);
	font-size: 9pt;
	line-height: 1.3;
	color: var(--black);
}

.sidebar-content p {
	margin: 0 0 0.06in 0;
	text-indent: 0;
	padding: 0;
}

.sidebar-content p:last-child {
	margin-bottom: 0;
}

.sidebar-content ul,
.sidebar-content ol {
	margin: 0.06in 0;
	padding-left: 0.15in;
}

.sidebar-content li {
	margin-bottom: 0.04in;
	line-height: 1.3;
}

.sidebar-content ul li::before {
	content: 'â€¢';
	position: absolute;
	left: 0;
	font-weight: 700;
	font-size: 8pt;
}

.sidebar-content strong {
	font-weight: 700;
	color: var(--black);
}

.sidebar-content em {
	font-style: italic;
}

/* ========================================
   SIDEBAR VARIANTS - Styled Versions
   ======================================== */

/**
 * Example Sidebar
 * Light gray background for examples, code snippets, reference material
 * Usage: class='sidebar-box sidebar-example'
 */
.sidebar-example {
	border-left: 2pt solid var(--gray-50);
	background-color: var(--gray-10);
}

.sidebar-example .sidebar-title {
	background-color: var(--gray-20);
	border-left: 2pt solid var(--gray-50);
	margin-left: -0.1in;
	padding-left: calc(0.1in - 2pt);
}

/**
 * Tip/Advice Sidebar
 * Green accent for helpful tips and best practices
 * Usage: class='sidebar-box sidebar-tip'
 */
.sidebar-tip {
	border-left: 2pt solid #4caf50;
	background-color: #f1f8e9;
}

.sidebar-tip .sidebar-title {
	background-color: #e8f5e9;
	border-left: 2pt solid #4caf50;
	margin-left: -0.1in;
	padding-left: calc(0.1in - 2pt);
	border-bottom: 0.5pt solid #c5e1a5;
}

/**
 * Lore/Flavor Sidebar
 * Italic, styled for in-world flavor text and setting information
 * Usage: class='sidebar-box sidebar-lore'
 */
.sidebar-lore {
	border-left: 2pt solid var(--gray-50);
	background-color: #faf9f7;
	font-style: italic;
}

.sidebar-lore .sidebar-title {
	background-color: #f5f1ed;
	font-style: italic;
	border-left: 2pt solid var(--gray-50);
	margin-left: -0.1in;
	padding-left: calc(0.1in - 2pt);
}

.sidebar-lore .sidebar-content {
	color: var(--gray-90);
	font-size: 8.5pt;
}

/**
 * Rule/Reference Sidebar
 * Bold borders for game rules and mechanical references
 * Usage: class='sidebar-box sidebar-rule'
 */
.sidebar-rule {
	border: 1.5pt solid var(--black);
	background-color: var(--white);
}

.sidebar-rule .sidebar-title {
	background-color: var(--black);
	color: var(--white);
	border: none;
	border-bottom: 1pt solid var(--gray-50);
}

/* ========================================
   INLINE FLOATING SIDEBARS
   ======================================== */

/**
 * Inline Sidebar (Float Right)
 * Sidebar that floats right within main text column
 * Limited width, text flows around it
 *
 * Usage:
 * <div class='sidebar-inline-right'>
 *   <div class='sidebar-title'>Title</div>
 *   <div class='sidebar-content'>...</div>
 * </div>
 *
 * Note: Paged.js may not support CSS floats perfectly
 * For guaranteed positioning, use grid layout above
 */
.sidebar-inline-right {
	width: 1.8in;
	float: right;
	margin: 0 0 0.12in 0.12in;
	padding: 0.1in;
	background: var(--gray-10);
	border: 1pt solid var(--gray-20);
	border-left: 2pt solid var(--black);

	font-family: var(--body-font);
	font-size: 8.5pt;
	line-height: 1.3;
	color: var(--black);

	/* Print optimization */
	break-inside: avoid;
	page-break-inside: avoid;
	clear: right;
	max-width: 100%;
	overflow-wrap: break-word;
	word-break: break-word;
	hyphens: auto;
}

.sidebar-inline-right .sidebar-title {
	font-family: var(--ui-font);
	font-size: 8pt;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	background-color: var(--gray-20);
	padding: 0.08in;
	margin: -0.1in -0.1in 0.08in -0.1in;
	border: none;
	break-after: avoid;
}

.sidebar-inline-right .sidebar-content p {
	margin: 0 0 0.04in 0;
	text-indent: 0;
}

/**
 * Inline Sidebar (Float Left)
 * Sidebar that floats left within main text column
 */
.sidebar-inline-left {
	width: 1.8in;
	float: left;
	margin: 0 0.12in 0.12in 0;
	padding: 0.1in;
	background: var(--gray-10);
	border: 1pt solid var(--gray-20);
	border-right: 2pt solid var(--black);

	font-family: var(--body-font);
	font-size: 8.5pt;
	line-height: 1.3;
	color: var(--black);

	break-inside: avoid;
	page-break-inside: avoid;
	clear: left;
	max-width: 100%;
	overflow-wrap: break-word;
	word-break: break-word;
	hyphens: auto;
}

.sidebar-inline-left .sidebar-title {
	font-family: var(--ui-font);
	font-size: 8pt;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	background-color: var(--gray-20);
	padding: 0.08in;
	margin: -0.1in -0.1in 0.08in -0.1in;
	border: none;
	break-after: avoid;
}

/* ========================================
   PULL QUOTE SYSTEM
   ======================================== */

/**
 * Base Pull Quote
 * Centered, styled pull quotes for emphasis
 *
 * Usage:
 * <blockquote class='pull-quote'>
 *   <p>Quote text here</p>
 * </blockquote>
 */
.pull-quote {
	margin: 0.18in 0.3in;
	padding: 0.12in 0.1in;
	border-top: 1pt solid var(--black);
	border-bottom: 1pt solid var(--black);
	text-align: center;
	font-style: italic;
	color: var(--gray-90);
	font-size: 10.5pt;
	line-height: 1.4;

	/* Print optimization */
	break-inside: avoid;
	page-break-inside: avoid;
	orphans: 3;
	widows: 3;
	max-width: 100%;
	overflow-wrap: break-word;
	word-break: break-word;
	hyphens: auto;
}

.pull-quote p {
	margin: 0;
	text-indent: 0;
	padding: 0;
}

.pull-quote p:first-child::before {
	content: '"';
	font-size: 1.2em;
	margin-right: 0.05em;
}

.pull-quote p:last-child::after {
	content: '"';
	font-size: 1.2em;
	margin-left: 0.05em;
}

/**
 * Pull Quote - Left Float
 * Pull quote that floats left within main text
 * Text flows around right side
 */
.pull-quote-left {
	width: 2.2in;
	float: left;
	margin: 0 0.12in 0.12in 0;
	padding: 0.12in;
	border-left: 2pt solid var(--black);
	border-right: none;
	border-top: none;
	border-bottom: none;
	text-align: left;
	font-style: italic;
	color: var(--gray-90);
	font-size: 9.5pt;
	line-height: 1.4;

	break-inside: avoid;
	page-break-inside: avoid;
	clear: left;
	background-color: transparent;
	overflow-wrap: break-word;
	word-break: break-word;
	hyphens: auto;
}

.pull-quote-left p {
	margin: 0 0 0.06in 0;
	text-indent: 0;
}

.pull-quote-left p:first-child::before {
	content: '"';
	font-size: 1.1em;
	margin-right: 0.04em;
}

.pull-quote-left p:last-child::after {
	content: '"';
	font-size: 1.1em;
	margin-left: 0.04em;
}

/**
 * Pull Quote - Right Float
 * Pull quote that floats right within main text
 * Text flows around left side
 */
.pull-quote-right {
	width: 2.2in;
	float: right;
	margin: 0 0 0.12in 0.12in;
	padding: 0.12in;
	border-right: 2pt solid var(--black);
	border-left: none;
	border-top: none;
	border-bottom: none;
	text-align: left;
	font-style: italic;
	color: var(--gray-90);
	font-size: 9.5pt;
	line-height: 1.4;

	break-inside: avoid;
	page-break-inside: avoid;
	clear: right;
	background-color: transparent;
	overflow-wrap: break-word;
	word-break: break-word;
	hyphens: auto;
}

.pull-quote-right p {
	margin: 0 0 0.06in 0;
	text-indent: 0;
}

.pull-quote-right p:first-child::before {
	content: '"';
	font-size: 1.1em;
	margin-right: 0.04em;
}

.pull-quote-right p:last-child::after {
	content: '"';
	font-size: 1.1em;
	margin-left: 0.04em;
}

/* ========================================
   CALLOUT BOXES - Rules & Warnings
   ======================================== */

/**
 * Base Callout Box
 * Compact callout for important game rules
 *
 * Usage:
 * <div class='callout-box'>
 *   <div class='callout-title'>Rule Name</div>
 *   <div class='callout-body'>Rule text</div>
 * </div>
 */
.callout-box {
	background: var(--white);
	border: 1.5pt solid var(--black);
	padding: 0.1in;
	margin: 0.12in 0;

	/* Print optimization */
	break-inside: avoid;
	page-break-inside: avoid;
	orphans: 3;
	widows: 3;
	max-width: 100%;
	overflow-wrap: break-word;
	word-break: break-word;
	hyphens: auto;
}

/**
 * Callout Title with Icon Prefix
 * Bold header with optional icon
 */
.callout-title {
	font-family: var(--ui-font);
	font-size: 9pt;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.04em;
	color: var(--white);
	background-color: var(--black);
	padding: 0.08in 0.1in;
	margin: -0.1in -0.1in 0.08in -0.1in;
	display: flex;
	align-items: center;
	gap: 0.08in;

	break-after: avoid;
	page-break-after: avoid;
}

/**
 * Callout Icon (optional)
 * Small icon before title
 */
.callout-icon {
	width: 0.2in;
	height: 0.2in;
	display: flex;
	align-items: center;
	justify-content: center;
	font-weight: 700;
	font-size: 8pt;
	flex-shrink: 0;
}

/**
 * Callout Body
 * Content area with tighter spacing
 */
.callout-body {
	font-family: var(--body-font);
	font-size: 9pt;
	line-height: 1.35;
	color: var(--black);
}

.callout-body p {
	margin: 0 0 0.06in 0;
	text-indent: 0;
	padding: 0;
}

.callout-body p:last-child {
	margin-bottom: 0;
}

.callout-body ul,
.callout-body ol {
	margin: 0.06in 0;
	padding-left: 0.18in;
}

.callout-body li {
	margin-bottom: 0.04in;
	line-height: 1.35;
}

.callout-body strong {
	font-weight: 700;
}

/**
 * Callout - Important
 * Emphasizes critical game mechanics
 * Usage: class='callout-box callout-important'
 */
.callout-important {
	border: 2pt solid var(--black);
	background-color: var(--gray-10);
}

.callout-important .callout-title {
	background-color: var(--black);
	color: var(--white);
}

/**
 * Callout - Rule
 * Standard rules and mechanics reference
 * Usage: class='callout-box callout-rule'
 */
.callout-rule {
	border: 1pt solid var(--gray-50);
	background-color: var(--white);
}

.callout-rule .callout-title {
	background-color: var(--gray-90);
	color: var(--white);
	font-size: 8.5pt;
	padding: 0.08in;
}

/**
 * Callout - Warning
 * Alerts about potential rule conflicts or special cases
 * Usage: class='callout-box callout-warning'
 */
.callout-warning {
	border: 1.5pt solid var(--black);
	background-color: #fff3e0;
}

.callout-warning .callout-title {
	background-color: #f57c00;
	color: var(--white);
	border-bottom: 1pt solid #e65100;
}

.callout-warning .callout-body {
	color: #e65100;
}

/* ========================================
   UTILITY & RESET CLASSES
   ======================================== */

/**
 * Clear Floats
 * Use on container after floating sidebars/quotes
 */
.clear {
	clear: both;
	height: 0;
	overflow: hidden;
}

.clear-left {
	clear: left;
	height: 0;
	overflow: hidden;
}

.clear-right {
	clear: right;
	height: 0;
	overflow: hidden;
}

/**
 * Sidebar Reset
 * Remove all sidebar styling (for edge cases)
 */
.no-sidebar {
	float: none;
	width: auto;
	margin: 0;
	padding: 0;
	border: none;
	background: transparent;
	break-inside: auto;
	page-break-inside: auto;
	clear: none;
}

/**
 * Keep Together
 * Prevent page breaks within element
 */
.keep-together {
	break-inside: avoid;
	page-break-inside: avoid;
	orphans: 4;
	widows: 4;
}

/**
 * Compact Spacing
 * Reduce internal spacing for density
 */
.compact .sidebar-content p,
.compact .callout-body p {
	margin-bottom: 0.04in;
}

.compact .sidebar-content ul,
.compact .sidebar-content ol,
.compact .callout-body ul,
.compact .callout-body ol {
	margin: 0.04in 0;
}

/* ========================================
   RESPONSIVE ADJUSTMENTS FOR PRINT
   ======================================== */

@media print {
	/* Force color adjust for all sidebar components */
	.sidebar-box,
	.sidebar-inline-left,
	.sidebar-inline-right,
	.pull-quote,
	.pull-quote-left,
	.pull-quote-right,
	.callout-box {
		color-adjust: exact;
		-webkit-print-color-adjust: exact;
		print-color-adjust: exact;
	}

	/* Ensure background colors print */
	.sidebar-example,
	.sidebar-tip,
	.sidebar-lore,
	.sidebar-rule,
	.sidebar-inline-left,
	.sidebar-inline-right,
	.callout-important,
	.callout-warning {
		color-adjust: exact;
		-webkit-print-color-adjust: exact;
		print-color-adjust: exact;
		background-color: var(--gray-10) !important;
	}

	/* Force black titles */
	.sidebar-title,
	.callout-title {
		background-color: var(--black) !important;
		color: var(--white) !important;
	}

	/* Prevent page breaks */
	.page-with-sidebar,
	.page-three-column {
		break-inside: avoid !important;
		page-break-inside: avoid !important;
	}

	/* Float items should not exceed bounds */
	.sidebar-inline-left,
	.sidebar-inline-right,
	.pull-quote-left,
	.pull-quote-right {
		max-width: 100%;
		overflow: visible;
	}
}

/* ========================================
   LEGACY COMPATIBILITY
   ======================================== */

/**
 * Fallback for non-Paged.js rendering
 * If CSS Grid not supported, stack sidebars
 */
@supports not (display: grid) {
	.page-with-sidebar {
		display: block;
	}

	.page-with-sidebar > * {
		display: block;
		width: 100%;
		margin-bottom: 0.12in;
	}

	.page-three-column {
		display: block;
	}

	.page-three-column > * {
		display: block;
		width: 100%;
		margin-bottom: 0.12in;
	}
}

/* ========================================
   DOCUMENTATION & EXAMPLES
   ======================================== */

/**
 * USAGE EXAMPLES:
 *
 * 1. SIDEBAR BOX (Right Column Layout)
 * ====================================
 * <section class='page-with-sidebar'>
 *   <div class='main-content'>
 *     <h2>Section Title</h2>
 *     <p>Main content here...</p>
 *   </div>
 *   <div class='sidebar-column'>
 *     <div class='sidebar-box sidebar-tip'>
 *       <div class='sidebar-title'>Quick Tip</div>
 *       <div class='sidebar-content'>
 *         <p>Helpful information here</p>
 *       </div>
 *     </div>
 *   </div>
 * </section>
 *
 * 2. INLINE FLOATING SIDEBAR (Within Text)
 * ========================================
 * <section>
 *   <div class='sidebar-inline-right sidebar-rule'>
 *     <div class='sidebar-title'>Special Rule</div>
 *     <div class='sidebar-content'>
 *       <p>Rule text flows in sidebar while paragraph wraps...</p>
 *     </div>
 *   </div>
 *   <p>Main paragraph text wraps around the floating sidebar...</p>
 * </section>
 *
 * 3. PULL QUOTE (Centered)
 * ======================
 * <blockquote class='pull-quote'>
 *   <p>A striking quote that emphasizes important theme.</p>
 * </blockquote>
 *
 * 4. PULL QUOTE (Left Float)
 * ========================
 * <blockquote class='pull-quote-left'>
 *   <p>Quote on left side with text wrapping right.</p>
 * </blockquote>
 * <p>Main text flows to the right of the quote...</p>
 *
 * 5. CALLOUT BOX (Rule Warning)
 * ============================
 * <div class='callout-box callout-warning'>
 *   <div class='callout-title'>
 *     <span class='callout-icon'>!</span>
 *     <span>Exception to Rule</span>
 *   </div>
 *   <div class='callout-body'>
 *     <p>This is an important exception you must know...</p>
 *   </div>
 * </div>
 *
 * 6. THREE-COLUMN LAYOUT
 * ====================
 * <section class='page-three-column'>
 *   <div class='sidebar-column'>
 *     <!-- Left sidebar boxes -->
 *   </div>
 *   <div class='main-content'>
 *     <!-- Main content -->
 *   </div>
 *   <div class='sidebar-column'>
 *     <!-- Right sidebar boxes -->
 *   </div>
 * </section>
 */
