/**
 * ⚠️ DEPRECATED - This file uses legacy CSS variables
 *
 * This file is DEPRECATED and will be removed in v3.0.0 (Q3 2025)
 *
 * The variables used in this file (--font-family, --base-font-size,
 * --primary-color, --secondary-color, etc.) are from the old design
 * system and have been replaced by the unified core-variables.css system.
 *
 * Migration Required:
 * - Replace --font-family with --font-body
 * - Replace --base-font-size with --font-size-base
 * - Replace --line-height with --line-height-base
 * - Replace --header-font-family with --font-heading
 * - Replace --primary-color with --color-text
 * - Replace --secondary-color with --color-accent-primary
 * - Replace --accent-color1 with --color-accent-secondary
 * - Replace --accent-color2 with --color-accent-tertiary
 * - Replace --accent-color3 with --color-accent-tertiary (or define custom)
 * - Replace --small-gap with --spacing-sm
 * - Replace --default-gap with --spacing-md
 * - Replace --quote-font-size with --font-size-sm
 *
 * See docs/design-system-migration.md for complete migration guide
 *
 * Compatibility Layer:
 * A compatibility layer (book-reset-compat.css) is currently loaded
 * to maintain backward compatibility. This allows existing custom CSS
 * to continue working, but users should migrate to the new system.
 *
 * Timeline:
 * - v2.0.0 (Current): Compatibility layer active, warnings visible
 * - v2.5.0 (Q2 2025): Enhanced warnings, migration tools provided
 * - v3.0.0 (Q3 2025): Legacy variables removed (BREAKING CHANGE)
 */

/* Sets the default styles for the body element, including font family, size, line height, and text color. */
body {
  margin: 0;
  font-family: var(--font-family);
  font-size: var(--base-font-size);
  line-height: var(--line-height);
  color: var(--primary-color);
}

/* Ensures that headings, paragraphs, figures, tables, block quotes, lists, etc., do not break across pages. */
h1,
h2,
h3,
h4,
p,
figure,
table,
blockquote,
ol,
ul {
  page-break-inside: avoid;
}

/* Sets the default styles for headings, including font family, color, and margins. */

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--header-font-family);
  letter-spacing: 0.1em;
  color: var(--secondary-color);
  margin-top: 0;
  margin-bottom: var(--small-gap);
  text-wrap: balance;
}

/* Styles for the first-level heading (h1), including color and a bottom border for emphasis. */
h1 {
  color: var(--secondary-color);
  border-bottom: thin var(--secondary-color) solid;
  font-size: calc(var(--base-font-size) * 1.2);
  text-wrap: nowrap;
}

/* Styles for the second-level heading (h2) with a distinct accent color. */
h2 {
  color: var(--accent-color1);
  font-size: calc(var(--base-font-size) * 1.1);
  text-wrap: nowrap;
}

/* Styles for the third-level heading (h3) with a different accent color. */
h3 {
  color: var(--accent-color2);
  font-size: calc(var(--base-font-size) * 1);
}

/* Styles for the fourth-level heading (h4) with another accent color. */
h4 {
  color: var(--accent-color3);
  font-size: calc(var(--base-font-size) * 0.9);
}

/* Styles for horizontal rules, setting the border color to match the secondary color. */
hr {
  border-color: var(--secondary-color);
}

/* Styles for strong (bold) text, setting the color to the first accent color for emphasis. */
strong {
  color: var(--secondary-color);
}

/* Styles for the article element, incrementing the chapter number counter and ensuring a page break after each article. */
article {
  page-break-after: always;
}

/* Styles for div elements with the class 'page', setting the z-index and ensuring a page break after each. */
div.page {
  z-index: 1;
  page-break-after: always;
  page-break-inside: avoid;
}

blockquote {
  font-size: var(--quote-font-size);
  font-style: italic;
  text-wrap: balance;
}

blockquote:has(blockquote:empty) {
  page-break-after: always;
  display: none;
}

/* Styles for unordered and ordered lists, setting padding for indentation. */
ul,
ol {
  padding-left: var(--small-gap);
}

/* Styles for list items in unordered lists, removing the default list style and adding a custom marker. */
ul li {
  list-style: none;
}

/* Custom marker for unordered list items, using a greater-than symbol and a specific color. */
ul li::before {
  content: "> ";
  font-weight: 500;
  padding-right: var(--small-gap);
  color: var(--secondary-color);
}

/* Styles for ordered lists, resetting the list counter and removing the default list style. */
ol {
  list-style: none;
  counter-reset: list-num;
}

/* Custom numbering for ordered list items, using the list counter and a specific color. */
ol li {
  counter-increment: list-num;
}

/* Custom marker for ordered list items, formatting the counter as a number followed by a colon. */
ol li::before {
  content: counter(list-num) ": ";
  color: var(--secondary-color);
}

/* Custom marker for nested ordered list items, formatting the counter with a period and a different accent color. */
ol li>ol li::before {
  content: " ." counter(list-num) ": ";
  content: "  - ";
  /* color: var(--accent-color1); */
}

/* Styles for table elements, setting border spacing and collapsing behavior. */
table {
  border-spacing: 13px;
  border-collapse: collapse;
  margin-bottom: var(--default-gap);
}

/* Styles for table rows within the tbody element, setting position and margin. */
tbody tr {
  position: relative;
  margin-bottom: var(--small-gap);
}

/* Decorative after pseudo-element for table rows, creating a gradient underline effect. */
tbody tr::after {
  background: linear-gradient(90deg,
      rgba(218, 218, 219, 0.35) 0%,
      var(--accent-color2) 30%,
      var(--accent-color2) 80%,
      rgba(218, 218, 219, 0.55) 100%);
  background-repeat: no-repeat;
  background-size: 100% 1px;
  height: 1px;
  background-position-y: top;
  background-position-x: center;
  content: "";
  position: absolute;
  inset: 0;
}

/* Styles for the first table row, setting the background to the second accent color. */
tbody tr:first-of-type::after {
  background: var(--accent-color2);
}

/* Styles for table header cells, setting text alignment, color, and vertical alignment. */
th {

  font-family: var(--header-font-family);
  letter-spacing: 0.1em;
  font-size: 0.8em;
  white-space: nowrap;
  color: var(--accent-color1);
  text-align: center;
  vertical-align: text-top;
}

/* Styles for table data cells, setting vertical alignment, padding, and text alignment for the first cell. */
td {
  vertical-align: text-top;
  padding-bottom: var(--small-gap);
  padding-top: var(--small-gap);
}

/* Additional styles for the first data cell in each row, setting text alignment and other properties. */
td:first-of-type {
  text-align: center;
  border: none;
  font-weight: bold;
  padding-right: var(--default-gap);
  white-space: nowrap;
  color: var(--secondary-color)
}

code {
  color: var(--secondary-color);
}

img {
  shape-margin: var(--default-gap);
}

/**
 * COMPATIBILITY LAYER - Bridge between legacy and modern design systems
 *
 * This file maps legacy CSS variables from book-reset.css to the new
 * unified core-variables.css system. This allows existing user custom CSS
 * to continue working during the migration period.
 *
 * @deprecated ALL VARIABLES IN THIS FILE ARE DEPRECATED
 *
 * Legacy variables will be removed in v3.0.0 (Q3 2025)
 * Please migrate to the new design system documented in:
 * docs/design-system-migration.md
 *
 * Migration Path:
 * - v2.0.0 (Current): Compatibility layer active, warnings in console
 * - v2.5.0 (Q2 2025): Stricter warnings, migration tools provided
 * - v3.0.0 (Q3 2025): Legacy variables removed completely
 */

:root {
  /* ============================================================================
     LEGACY TYPOGRAPHY VARIABLES → MODERN EQUIVALENTS
     ============================================================================ */

  /**
   * @deprecated Use --font-body instead
   * Mapped to: --font-body (Crimson Text, serif)
   */
  --font-family: var(--font-body);

  /**
   * @deprecated Use --font-size-base instead
   * Mapped to: --font-size-base (10.5pt)
   */
  --base-font-size: var(--font-size-base);

  /**
   * @deprecated Use --line-height-base instead
   * Mapped to: --line-height-base (1.45)
   */
  --line-height: var(--line-height-base);

  /**
   * @deprecated Use --font-heading instead
   * Mapped to: --font-heading (Libre Baskerville, serif)
   */
  --header-font-family: var(--font-heading);

  /**
   * @deprecated Use --font-size-sm instead
   * Mapped to: --font-size-sm (9pt)
   */
  --quote-font-size: var(--font-size-sm);

  /* ============================================================================
     LEGACY COLOR VARIABLES → MODERN EQUIVALENTS
     ============================================================================ */

  /**
   * @deprecated Use --color-text instead
   * Mapped to: --color-text (inherited from --color-ink)
   * Original use: Primary text color for body content
   */
  --primary-color: var(--color-text);

  /**
   * @deprecated Use --color-accent-primary instead
   * Mapped to: --color-accent-primary
   * Original use: Headings, emphasis elements, primary brand color
   */
  --secondary-color: var(--color-accent-primary);

  /**
   * @deprecated Use --color-accent-secondary instead
   * Mapped to: --color-accent-secondary
   * Original use: H2 headings, table headers, secondary accents
   */
  --accent-color1: var(--color-accent-secondary);

  /**
   * @deprecated Use --color-accent-tertiary instead
   * Mapped to: --color-accent-tertiary
   * Original use: H3 headings, table decorations, tertiary accents
   */
  --accent-color2: var(--color-accent-tertiary);

  /**
   * @deprecated Use --color-accent-tertiary or define a custom variable
   * Mapped to: --color-accent-tertiary (fallback)
   * Original use: H4 headings, less common accent
   * Note: Consider defining a fourth accent color if needed
   */
  --accent-color3: var(--color-accent-tertiary);

  /**
   * @deprecated Use --color-paper instead
   * Mapped to: --color-paper
   * Original use: Page background color
   */
  --background-color: var(--color-background);

  /* ============================================================================
     LEGACY SPACING VARIABLES → MODERN EQUIVALENTS
     ============================================================================ */

  /**
   * @deprecated Use --spacing-sm instead
   * Mapped to: --spacing-sm (8pt)
   * Original use: List padding, small margins, compact spacing
   */
  --small-gap: var(--spacing-sm);

  /**
   * @deprecated Use --spacing-md instead
   * Mapped to: --spacing-md (16pt)
   * Original use: Default spacing between elements, table margins
   */
  --default-gap: var(--spacing-md);

  /* ============================================================================
     LEGACY PAGE LAYOUT VARIABLES → MODERN EQUIVALENTS
     ============================================================================ */

  /**
   * @deprecated Use --margin-inner and --margin-outer instead
   * Mapped to: --margin-inner
   * Original use: Page margins for print layout
   * Note: Modern system uses separate inner/outer margins for binding
   */
  --page-margin: var(--margin-inner);
}
