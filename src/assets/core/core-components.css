/**
 * Core Components - Universal Callout System
 *
 * Professional callouts for technical documentation, textbooks, manuals
 * Five standard types: Note, Tip, Warning, Danger, Info
 * CSS-based icons (no emojis) with geometric shapes
 * WCAG AA compliant color contrast
 *
 * This callout system is industry-standard and applies to ANY book genre
 * that needs advisory boxes, sidebars, or highlighted content.
 */
.pagedjs_page {
  background-color: var(--color-paper);
}

/* ========================================
   CALLOUTS - Base Styles
   ======================================== */

.callout {
  position: relative;
  background: var(--callout-bg, #f7f7f7);
  border-left: var(--callout-border-width) solid var(--callout-border, #333);
  padding: var(--callout-padding);
  padding-left: calc(var(--callout-padding) * 1.5);
  margin: var(--spacing-md) 0;
  border-radius: var(--callout-border-radius);
  box-shadow: var(--callout-shadow);
  break-inside: avoid;
  page-break-inside: avoid;
}

.callout-title {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-sm);
  font-family: var(--font-ui);
  font-weight: var(--font-weight-semibold);
}

.callout-title-text {
  margin: 0;
  font-size: var(--font-size-base);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wide);
}

.callout-content {
  color: var(--color-text);
}

.callout-content>*:first-child {
  margin-top: 0;
}

.callout-content>*:last-child {
  margin-bottom: 0;
}

/* ========================================
   CALLOUT ICONS - CSS-Based (NO EMOJI)
   ======================================== */

/* Print-safe icons using pure CSS geometric shapes
   No emojis, web fonts, or external assets required */
.callout-icon {
  position: relative;
  width: 1.2em;
  height: 1.2em;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  background: var(--callout-border);
  color: white;
  font-family: var(--font-ui);
  font-style: normal;
  font-weight: bold;
  font-size: 0.9em;
}

.callout-icon::after {
  content: "i";
}

/* ========================================
   CALLOUT TYPES - Professional Colors
   ======================================== */

/* Note Callout - Blue
   Use for: General information, context, explanations
   Examples: "Note: This section requires prior knowledge" */
.callout-note {
  --callout-bg: var(--color-note-bg);
  --callout-border: var(--color-note-border);
}

.callout-note .callout-icon::after {
  content: "i";
}

/* Tip Callout - Green with Lightbulb Icon
   Use for: Helpful advice, best practices, shortcuts
   Examples: "Tip: You can speed this up by..." */
.callout-tip {
  --callout-bg: var(--color-tip-bg);
  --callout-border: var(--color-tip-border);
}

.callout-tip .callout-icon {
  border-radius: var(--border-radius-base);
}

.callout-tip .callout-icon::after {
  content: "";
  width: 0.6em;
  height: 0.8em;
  background: white;
  border-radius: 40% 40% 0 0;
  border: 2px solid currentColor;
  border-bottom: none;
  position: relative;
}

.callout-tip .callout-icon::before {
  content: "";
  position: absolute;
  bottom: 0.2em;
  width: 0.4em;
  height: 0.2em;
  background: white;
  border-radius: 0 0 2px 2px;
}

/* Warning Callout - Yellow/Orange with Triangle
   Use for: Cautions, important considerations, potential issues
   Examples: "Warning: This operation cannot be undone" */
.callout-warning {
  --callout-bg: var(--color-warning-bg);
  --callout-border: var(--color-warning-border);
}

.callout-warning .callout-icon {
  border-radius: 0;
  clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
}

.callout-warning .callout-icon::after {
  content: "!";
  font-size: 1em;
}

/* Danger Callout - Red with Octagon
   Use for: Critical warnings, errors, things that will break
   Examples: "Danger: This will delete all your data" */
.callout-danger {
  --callout-bg: var(--color-danger-bg);
  --callout-border: var(--color-danger-border);
}

.callout-danger .callout-icon {
  border-radius: 0;
  clip-path: polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%);
}

.callout-danger .callout-icon::after {
  content: "Ã—";
  font-size: 1.4em;
  line-height: 1;
}

/* Info Callout - Gray with Square
   Use for: Neutral information, definitions, references
   Examples: "Info: See Chapter 5 for more details" */
.callout-info {
  --callout-bg: var(--color-info-bg);
  --callout-border: var(--color-info-border);
}

.callout-info .callout-icon {
  border-radius: var(--border-radius-sm);
}

.callout-info .callout-icon::after {
  content: "i";
}

/* ========================================
   PRINT OPTIMIZATION
   ======================================== */

/* Ensure callouts respect page breaks and don't orphan */
.callout {
  orphans: 3;
  widows: 3;
}

/* Prevent awkward breaks within callout structure */
.callout-title {
  break-after: avoid;
  page-break-after: avoid;
}