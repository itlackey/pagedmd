 /* CSS for Paged.js interface â€“ v0.4 */

 /* Change the look */
 .preview-container{
     --color-background: whitesmoke;
     --color-pageSheet: #cfcfcf;
     --color-pageBox: transparent;
     --pagedjs-mark-cross-display: none;
     --pagedjs-mark-crop-display: none;
     --color-paper: white;
     --color-marginBox: transparent;
     --preview-container-bg: #c4c4c4;
 }

 /* To define how the book look on the screen: */
 @media screen,
 pagedjs-ignore {
     body {
         background-color: var(--preview-container-bg);
         margin: 0;
         padding: 0;
         overflow-x: hidden;
         overflow-y: hidden;
         height: 100vh;
     }

     .pagedjs_pages {
         display: flex;
         width: calc(var(--pagedjs-width) * 2);
         flex: 0;
         flex-wrap: wrap;
         margin: 0 auto !important;
         transition: all 0.3s ease;
     }

     .pagedjs_page {
         background-color: white !important;
         box-shadow: 0 0 0 1px var(--color-pageSheet);
         margin: 0;
         flex-shrink: 0;
         flex-grow: 0;
         margin-top: 10mm;
         transition: all 0.3s ease;
     }

     .pagedjs_first_page {
         margin-left: 0;
     }

     .pagedjs_page:last-of-type {
         margin-bottom: 10mm;
     }

     .pagedjs_pagebox {
         box-shadow: 0 0 0 1px var(--color-pageBox);
     }

     .pagedjs_left_page {
         z-index: 20;
         width: calc(var(--pagedjs-bleed-left) + var(--pagedjs-pagebox-width)) !important;
     }

     .pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop {
         border-color: transparent;
     }

     .pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-middle {
         width: 0;
     }

     .pagedjs_right_page {
         z-index: 10;
         position: relative;
         left: calc(var(--pagedjs-bleed-left)*-1);
     }

     /* show the margin-box */

     .pagedjs_margin-top-left-corner-holder,
     .pagedjs_margin-top,
     .pagedjs_margin-top-left,
     .pagedjs_margin-top-center,
     .pagedjs_margin-top-right,
     .pagedjs_margin-top-right-corner-holder,
     .pagedjs_margin-bottom-left-corner-holder,
     .pagedjs_margin-bottom,
     .pagedjs_margin-bottom-left,
     .pagedjs_margin-bottom-center,
     .pagedjs_margin-bottom-right,
     .pagedjs_margin-bottom-right-corner-holder,
     .pagedjs_margin-right,
     .pagedjs_margin-right-top,
     .pagedjs_margin-right-middle,
     .pagedjs_margin-right-bottom,
     .pagedjs_margin-left,
     .pagedjs_margin-left-top,
     .pagedjs_margin-left-middle,
     .pagedjs_margin-left-bottom {
         box-shadow: 0 0 0 1px inset var(--color-marginBox);
     }

     /* uncomment this part for recto/verso book : ------------------------------------ */

     /*
    .pagedjs_pages {
        flex-direction: column;
        width: 100%;
    }

    .pagedjs_first_page {
        margin-left: 0;
    }

    .pagedjs_page {
        margin: 0 auto;
        margin-top: 10mm;
    }

    .pagedjs_left_page{
        width: calc(var(--pagedjs-bleed-left) + var(--pagedjs-pagebox-width) + var(--pagedjs-bleed-left))!important;
    }

    .pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop{
        border-color: var(--pagedjs-crop-color);
    }

    .pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-middle{
        width: var(--pagedjs-cross-size)!important;
    }

    .pagedjs_right_page{
        left: 0;
    }
    */



     /*--------------------------------------------------------------------------------------*/



     /* uncomment this par to see the baseline : -------------------------------------------*/


     /* .pagedjs_pagebox {
        --pagedjs-baseline: 22px;
        --pagedjs-baseline-position: 5px;
        --pagedjs-baseline-color: cyan;
        background: linear-gradient(transparent 0%, transparent calc(var(--pagedjs-baseline) - 1px), var(--pagedjs-baseline-color) calc(var(--pagedjs-baseline) - 1px), var(--pagedjs-baseline-color) var(--pagedjs-baseline)), transparent;
        background-size: 100% var(--pagedjs-baseline);
        background-repeat: repeat-y;
        background-position-y: var(--pagedjs-baseline-position);
    }  */


     /*--------------------------------------------------------------------------------------*/
 }


 .debug {
     --color-pageBox: violet;
     --pagedjs-crop-color: black;
     --pagedjs-crop-shadow: white;
     --pagedjs-crop-stroke: 1px;
     --pagedjs-mark-cross-display: block;
     --pagedjs-mark-crop-display: block;

 }


 /* Marks (to delete when merge in paged.js) */

 .pagedjs_marks-crop {
     z-index: 999999999999;

 }

 .pagedjs_bleed-top .pagedjs_marks-crop,
 .pagedjs_bleed-bottom .pagedjs_marks-crop {
     box-shadow: 1px 0px 0px 0px var(--pagedjs-crop-shadow);
 }

 .pagedjs_bleed-top .pagedjs_marks-crop:last-child,
 .pagedjs_bleed-bottom .pagedjs_marks-crop:last-child {
     box-shadow: -1px 0px 0px 0px var(--pagedjs-crop-shadow);
 }

 .pagedjs_bleed-left .pagedjs_marks-crop,
 .pagedjs_bleed-right .pagedjs_marks-crop {
     box-shadow: 0px 1px 0px 0px var(--pagedjs-crop-shadow);
 }

 .pagedjs_bleed-left .pagedjs_marks-crop:last-child,
 .pagedjs_bleed-right .pagedjs_marks-crop:last-child {
     box-shadow: 0px -1px 0px 0px var(--pagedjs-crop-shadow);
 }

 /* Debug console in toolbar */
 #debug-console {
     font-size: 11px;
     color: #6ee7b7; /* Emerald-300 - WCAG AA compliant (4.7:1 contrast ratio) */
     max-width: 200px;
     overflow: hidden;
     text-overflow: ellipsis;
     white-space: nowrap;
 }

 #debug-console.error {
     color: #fca5a5; /* Red-300 - WCAG AA compliant (5.1:1 contrast ratio) */
 }

 /* Preview container styles */
 .preview-container {
     container-type: inline-size;
     height: calc(100vh - 56px);
     overflow-y: auto;
     overflow-x: hidden;
     display: flex;
     justify-content: center;
     padding: 0;
     background-color: var(--preview-container-bg);
 }

 /* SPREAD MODE: Container handles scrolling only */
 body.view-spread .preview-container {
     overflow-x: auto;
     overflow-y: auto;
     /* Remove centering from container - wrapper handles that */
     justify-content: flex-start;
     align-items: flex-start;
     padding: 0;
 }

 /* Wrapper centers the paged content within the scrollable container */
 body.view-spread .pages-wrapper {
     display: flex;
     justify-content: center;
     align-items: center;
     width: stretch;
     min-height: 100%;
 }

 /* Layout mode classes - controlled by user toggle */
 /* SPREAD MODE: Show two pages side-by-side like an open book */
 body.view-spread .pagedjs_pages {
     flex-direction: row !important;
     width: calc(var(--pagedjs-width) * 2) !important;
     max-height: calc(100vh - 70px);
     gap: 1rem;
     /* Let Paged.js control the width, but ensure it has space for 2 columns */
     min-width: fit-content;
     /* Add balanced padding to match wrapper - ensures first and last pages have equal margins */
     padding-inline: 2rem !important;
 }

 body.view-spread .pagedjs_first_page {
     margin-left: 0 !important;
 }

 body.view-spread .pagedjs_page {
     /* Remove auto margin - let wrapper handle centering */
     margin: 0 !important;
     margin-top: 10mm !important;
 }

 body.view-spread .pagedjs_left_page {
     width: calc(var(--pagedjs-bleed-left) + var(--pagedjs-pagebox-width) + var(--pagedjs-bleed-left)) !important;
 }

 body.view-spread .pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop {
     border-color: var(--pagedjs-crop-color) !important;
 }

 body.view-spread .pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-middle {
     width: var(--pagedjs-cross-size) !important;
 }

 body.view-spread .pagedjs_right_page {
     left: 0 !important;
 }

 /* Center the last page if it's alone (left page without a partner) */
 body.view-spread .pagedjs_pages .pagedjs_page.pagedjs_left_page:last-child {
     margin: 10mm auto 0 auto !important;
 }

 /* SINGLE MODE: Show one page at a time in vertical scroll */
 body.view-single .pagedjs_pages {
     flex-direction: column !important;
     width: 100% !important;
 }

 body.view-single .pagedjs_page {
     margin: 0 !important;
     margin-top: 10mm !important;
 }

 body.view-single .pagedjs_first_page {
     margin-left: 0 !important;
 }

 body.view-single .pagedjs_right_page {
     left: calc(var(--pagedjs-bleed-left)*-1) !important;
 }

 /* Responsive: Default to single column only if NO explicit view mode is set */
 @media screen and (max-width: 1700px) {
     body:not(.view-single):not(.view-spread) .pagedjs_pages {
         flex-direction: column;
         width: 100% !important;
     }

     body:not(.view-single):not(.view-spread) .pagedjs_first_page {
         margin-left: 0;
     }

     body:not(.view-single):not(.view-spread) .pagedjs_page {
         margin: 0 auto;
         margin-top: 10mm;
     }

     body:not(.view-single):not(.view-spread) .pagedjs_left_page {
         width: calc(var(--pagedjs-bleed-left) + var(--pagedjs-pagebox-width) + var(--pagedjs-bleed-left)) !important;
     }

     body:not(.view-single):not(.view-spread) .pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-crop {
         border-color: var(--pagedjs-crop-color);
     }

     body:not(.view-single):not(.view-spread) .pagedjs_left_page .pagedjs_bleed-right .pagedjs_marks-middle {
         width: var(--pagedjs-cross-size) !important;
     }

     body:not(.view-single):not(.view-spread) .pagedjs_right_page {
         left: 0;
     }
 }

 /* Smooth UX improvements */
 .preview-container.rendering {
     opacity: 0;
     pointer-events: none;
     transition: opacity 0.3s ease-in-out;
 }

 .preview-container.ready {
     opacity: 1;
     transition: opacity 0.3s ease-in-out;
 }

 /* Loading overlay */
 .loading-overlay {
     position: absolute;
     inset: 0;
     top: 56px; /* Below toolbar */
     background: var(--color-background);
     display: none;
     align-items: center;
     justify-content: center;
     z-index: 9999;
 }

 .loading-overlay.active {
     display: flex;
 }

 .loading-spinner {
     width: 40px;
     height: 40px;
     border: 3px solid #3a3a3a;
     border-top-color: #0066cc;
     border-radius: 50%;
     animation: spin 0.8s linear infinite;
 }

 @keyframes spin {
     to {
         transform: rotate(360deg);
     }
 }

 /* Reload indicator in toolbar */
 .reload-indicator {
     display: inline-block;
     width: 8px;
     height: 8px;
     border-radius: 50%;
     background: #4a4a4a;
     margin-left: 8px;
     transition: all 0.2s;
 }

 .reload-indicator.reloading {
     background: #ffa500;
     box-shadow: 0 0 8px rgba(255, 165, 0, 0.6);
     animation: pulse 1s ease-in-out infinite;
 }

 @keyframes pulse {

     0%,
     100% {
         opacity: 1;
     }

     50% {
         opacity: 0.5;
     }
 }

 /* Visually hidden but accessible to screen readers */
 .visually-hidden {
     position: absolute;
     width: 1px;
     height: 1px;
     padding: 0;
     margin: -1px;
     overflow: hidden;
     clip: rect(0, 0, 0, 0);
     white-space: nowrap;
     border: 0;
 }

 /* Folder Selection Modal - Unified with toolbar design system */
 .folder-modal {
     position: fixed;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
     background: rgba(0, 0, 0, 0.75);
     backdrop-filter: blur(4px);
     display: flex;
     align-items: center;
     justify-content: center;
     z-index: 10000;
     /* Match toolbar font family for consistency */
     font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
 }

 .folder-modal-content {
     background: #1e1e1e;
     background: linear-gradient(to bottom, #252525 0%, #1e1e1e 100%);
     border-radius: 8px;
     border: 1px solid #3a3a3a;
     width: 90%;
     max-width: 600px;
     max-height: 80vh;
     display: flex;
     flex-direction: column;
     box-shadow: 0 4px 24px rgba(0, 0, 0, 0.6),
         0 1px 0 rgba(255, 255, 255, 0.05) inset;
 }

 .folder-modal-header {
     padding: 20px 24px;
     border-bottom: 1px solid #3a3a3a;
     display: flex;
     justify-content: space-between;
     align-items: center;
 }

 .folder-modal-header h3 {
     margin: 0;
     font-size: 15px;
     font-weight: 600;
     color: #ffffff;
     letter-spacing: 0.01em;
     text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
 }

 .folder-modal-close {
     background: transparent;
     border: 1px solid #4a4a4a;
     border-radius: 6px;
     color: #b0b0b0;
     font-size: 20px;
     cursor: pointer;
     padding: 0;
     width: 32px;
     height: 32px;
     display: flex;
     align-items: center;
     justify-content: center;
     transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
     line-height: 1;
 }

 .folder-modal-close:hover {
     background: rgba(255, 255, 255, 0.05);
     border-color: #5a5a5a;
     color: #e0e0e0;
 }

 .folder-modal-body {
     padding: 24px;
     overflow-y: auto;
     flex: 1;
 }

 .folder-current-path {
     margin-bottom: 16px;
     padding: 12px 16px;
     background: #0f1419;
     border: 1px solid #2a2a2a;
     border-radius: 6px;
     font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
     font-size: 13px;
     color: #d1d5db; /* Gray-300 - WCAG AA compliant (7.1:1 contrast ratio) */
     word-break: break-all;
 }

 .folder-list {
     display: flex;
     flex-direction: column;
     gap: 8px;
 }

 .folder-loading {
     padding: 32px 20px;
     text-align: center;
     color: #9ca3af;
     font-size: 14px;
     font-weight: 500;
 }

 .folder-item {
     display: flex;
     align-items: center;
     padding: 12px 16px;
     background: #2a2a2a;
     border: 1px solid #3a3a3a;
     border-radius: 6px;
     cursor: pointer;
     transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
     font-size: 14px;
 }

 .folder-item:hover {
     background: #333333;
     border-color: #4a4a4a;
     transform: translateY(-1px);
     box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
 }

 .folder-item.parent {
     background: #2d2d2d;
     border-color: #4a4a4a;
 }

 .folder-item.parent:hover {
     background: #363636;
 }

 .folder-item-icon {
     margin-right: 12px;
     color: #9ca3af;
     width: 20px;
     height: 20px;
     display: flex;
     align-items: center;
     justify-content: center;
     font-size: 18px;
     flex-shrink: 0;
 }

 .folder-item-name {
     flex: 1;
     color: #e0e0e0;
     font-size: 14px;
     font-weight: 500;
 }

 .folder-item-path {
     font-size: 12px;
     color: #9ca3af; /* Gray-400 - WCAG AA compliant (4.8:1 contrast ratio) */
     font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
 }

 .folder-modal-footer {
     padding: 20px 24px;
     border-top: 1px solid #3a3a3a;
     display: flex;
     justify-content: flex-end;
     gap: 12px;
     background: rgba(0, 0, 0, 0.2);
 }

 .folder-item.selected {
     background: linear-gradient(to bottom, #0077dd 0%, #0066cc 100%);
     border-color: #0055aa;
     box-shadow: 0 2px 4px rgba(0, 102, 204, 0.3),
         0 1px 0 rgba(255, 255, 255, 0.1) inset;
 }

 .folder-item.selected .folder-item-name {
     color: #ffffff;
     font-weight: 600;
 }

 .folder-item.selected .folder-item-icon {
     color: #ffffff;
 }

 .folder-item.selected:hover {
     background: linear-gradient(to bottom, #0088ee 0%, #0077dd 100%);
     border-color: #0066cc;
     box-shadow: 0 3px 6px rgba(0, 102, 204, 0.4),
         0 1px 0 rgba(255, 255, 255, 0.15) inset;
 }

 /* Focus styles for modal elements */
 .folder-modal-close:focus {
     outline: 2px solid #0066cc;
     outline-offset: 2px;
 }

 .folder-item:focus {
     outline: 2px solid #0066cc;
     outline-offset: -2px;
     background: #3a3a3a;
 }

 .folder-item.selected:focus {
     outline: 2px solid #60a5fa; /* Lighter blue for selected items */
     outline-offset: -2px;
 }

 #btn-open-folder:focus {
     outline: 2px solid #0066cc;
     outline-offset: 2px;
 }

 /* High contrast mode support */
 @media (prefers-contrast: high) {
     .toolbar-btn:focus,
     .folder-item:focus,
     .folder-modal-close:focus,
     .page-input:focus,
     .zoom-select:focus,
     #btn-open-folder:focus {
         outline-width: 3px;
         outline-offset: 3px;
     }
 }

 /* Print button specific styles */
 #btn-print {
     /* Use default button styles but ensure proper spacing for icon+text */
     gap: 6px;
 }

 #btn-print:disabled {
     /* Visual feedback when rendering is in progress */
     opacity: 0.35;
     cursor: not-allowed;
 }

 /* Hide toolbar and other UI elements when printing */
 @media print {
     .toolbar {
         display: none !important;
     }

     .folder-modal {
         display: none !important;
     }

     .loading-overlay {
         display: none !important;
     }

     #status-announcer {
         display: none !important;
     }

     #debug-console {
         display: none !important;
     }

     .reload-indicator {
         display: none !important;
     }
 }
